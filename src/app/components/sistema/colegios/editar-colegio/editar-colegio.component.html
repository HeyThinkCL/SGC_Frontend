<div class="title-bar">
  <h1 class="title-bar title">Editar Colegio</h1>
  <h3 class="title bar description" *ngIf="selectedColegio">{{selectedColegio.nombre}}</h3>

</div>
<div class="row">
  <div class="col-md-8 col-md-offset-2">
    <app-spinner [timeoutMessage]="timeoutMessage" *ngIf="!(selectedColegio && colegio)"></app-spinner>
    <div class="demo-md-form-wrapper" *ngIf="colegio && selectedColegio && regiones.length>0 && provincias.length>0 && comunas.length>0">
      <div class="form form-horizontal">
        <div class="md-form-group md-label-static">
          <label class="col-sm-2 md-control-label" for="form-control-1"><b>Nombre del Establecimiento:</b> {{selectedColegio.nombre}}</label>
          <div class="col-sm-10">
            <input id="form-control-1" class="form-control" type="text" [(ngModel)]="colegio.nombre">
          </div>
        </div>

        <div class="md-form-group">
          <div class="md-label-static">
            <label class="col-sm-2 md-control-label" for="form-control-2"><b>Razón Social:</b> {{selectedColegio.razon_social}}</label>
            <div class="col-sm-4">
              <input id="form-control-2" class="form-control" type="text" [(ngModel)]="colegio.razon_social"  >
            </div>
          </div>
          <div class="md-label-static">
            <label class="col-sm-2 col-sm-offset-4 md-control-label" for="form-control-3"><b>Resolución</b> {{selectedColegio.resolucion}}</label>
            <div class="col-sm-6">
              <input id="form-control-3" class="form-control" type="text" [(ngModel)]="colegio.resolucion"  >
            </div>
          </div>
        </div>
        <div class="md-form-group">
          <div class="md-label-static">

            <label class="col-sm-2 md-control-label" for="form-control-4"><b>RBD:</b> {{selectedColegio.rbd}}</label>
            <div class="col-sm-3">
              <input id="form-control-4" class="form-control" type="text" [(ngModel)]="colegio.rbd"  >
            </div>
          </div>
          <div class="md-label-static">

            <label class="col-sm-2 col-sm-offset-4 md-control-label" for="form-control-5"><b>Dependencia:</b> {{selectedColegio.dependencia}}</label>
            <div class="col-sm-7">
              <input id="form-control-5" class="form-control" type="text" [(ngModel)]="colegio.dependencia"  >
            </div>
          </div>
        </div>
        <div class="md-form-group">
          <div class="md-label-static">

            <label class="col-sm-2 md-control-label" for="form-control-6"><b>Rut:</b> {{selectedColegio.rut}}</label>
            <div class="col-sm-2">
              <input id="form-control-6" class="form-control" type="text" [(ngModel)]="colegio.rut"  >
            </div>
            <div class="col-sm-2">
              <input id="form-control-7" class="form-control" type="text" maxlength="1" [(ngModel)]="colegio.dv"  >
            </div>
          </div>
          <div class="md-label-static">

            <label class="col-sm-1 col-sm-offset-4 md-control-label" for="form-control-8"><b>Área:</b> {{selectedColegio.area}}</label>
            <div class="col-sm-6">
              <input id="form-control-8" class="form-control" type="text" [(ngModel)]="colegio.area"  >
            </div>
          </div>
        </div>
        <div class="md-form-group">
          <div class="md-label-static">

            <label class="col-sm-2  md-control-label" for="form-control-9"><b>Dirección:</b> {{selectedColegio.direccion}}</label>
            <div class="col-sm-7">
              <input id="form-control-9" class="form-control" type="text" [(ngModel)]="colegio.direccion"  >
            </div>
          </div>
          <div class="md-label-static">

            <label class="col-sm-2 col-sm-offset-7 md-control-label" for="form-control-10"><b>Num.:</b> {{selectedColegio.numeracion}}</label>
            <div class="col-sm-3">
              <input id="form-control-10" class="form-control" type="text" [(ngModel)]="colegio.numeracion"  >
            </div>
          </div>
        </div>
        <div class="md-form-group">
          <div class="md-label-static">

            <label class="col-sm-2  md-control-label" for="form-control-11"><b>Región:</b> {{selectedColegio.region}}</label>
            <div class="col-sm-5">
              <select id="form-control-11"
                      class="form-control"
                      type="text"
                      [(ngModel)]="colegio.region"
                      (ngModelChange)="setRegion(colegio.region)">
                <option *ngFor="let region of regiones"
                        value="{{region.nombre}}">{{region.nombre}}</option>
              </select>
            </div>
          </div>
          <div class="md-label-static">

            <label class="col-sm-2 col-sm-offset-5 md-control-label" for="form-control-12"><b>Provincia:</b> {{selectedColegio.provincia}}</label>
            <div class="col-sm-5">
              <select id="form-control-12"
                      class="form-control"
                      type="text"
                      [(ngModel)]="colegio.provincia"
                      (ngModelChange)="setProvincia(colegio.provincia)"
                      [disabled]="!(this.colegio.region)">
                <option *ngFor="let provincia of provincias"
                        value="{{provincia.nombre}}">{{provincia.nombre}}</option>
              </select>
            </div>
          </div>
        </div>
        <div class="md-form-group">
          <div class="md-label-static">

            <label class="col-sm-2  md-control-label" for="form-control-13"><b>Comuna:</b> {{selectedColegio.comuna}}</label>
            <div class="col-sm-5">
              <select id="form-control-13"
                      class="form-control"
                      type="text"
                      [(ngModel)]="colegio.comuna"
                      (ngModelChange)="setComuna(colegio.comuna)"
                      [disabled]="!(this.colegio.provincia)">
                <option *ngFor="let comuna of comunas"
                        value="{{comuna.nombre}}">{{comuna.nombre}}</option>
              </select>
            </div>
          </div>
          <div class="md-label-static">
            <label class="col-sm-2 col-sm-offset-5 md-control-label" for="form-control-14"><b>Departamento Provincial:</b> {{selectedColegio.depto_prov}}</label>
            <div class="col-sm-5">
              <input id="form-control-14" class="form-control" type="text" [(ngModel)]="colegio.depto_prov" readonly>
            </div>
          </div>
        </div>
        <div class="md-form-group">
          <div class="md-label-static">

            <label class="col-sm-2  md-control-label" for="form-control-15"><b>Telefono:</b> {{selectedColegio.telefono}}</label>
            <div class="col-sm-5">
              <input id="form-control-15" class="form-control" type="text" [(ngModel)]="colegio.telefono"  >
            </div>
          </div>
          <div class="md-label-static">

            <label class="col-sm-2 col-sm-offset-5 md-control-label" for="form-control-16"><b>Celular:</b> {{selectedColegio.celular}}</label>
            <div class="col-sm-5">
              <input id="form-control-16" class="form-control" type="text" [(ngModel)]="colegio.celular"  >
            </div>
          </div>
        </div>
        <div class="md-form-group">
          <div class="md-label-static">
            <label class="col-sm-2  md-control-label" for="form-control-17"><b>Fax:</b> {{selectedColegio.fax}}</label>
            <div class="col-sm-4">
              <input id="form-control-17" class="form-control" type="text" [(ngModel)]="colegio.fax"  >
            </div>
          </div>
          <div class="md-label-static">
            <label class="col-sm-2 col-sm-offset-4 md-control-label" for="form-control-18"><b>Web:</b> {{selectedColegio.web}}</label>
            <div class="col-sm-6">
              <input id="form-control-18" class="form-control" type="text" [(ngModel)]="colegio.web"  >
            </div>
          </div>
        </div>
        <div class="md-form-group">
          <div class="md-label-static">

            <label class="col-sm-2 md-control-label" for="form-control-19"><b>Mail:</b> {{selectedColegio.mail}}</label>
            <div class="col-sm-10">
              <input id="form-control-19" class="form-control" type="text" [(ngModel)]="colegio.mail"  >
            </div>
          </div>
        </div>
        <div class="md-form-group">
          <div class="md-label-static">

            <label class="col-sm-2  md-control-label" for="form-control-20"><b>Sostenedor:</b> {{selectedColegio.sostenedor}}</label>
            <div class="col-sm-10">
              <input id="form-control-20" class="form-control" type="text" [(ngModel)]="colegio.sostenedor"  >
            </div>
          </div>
        </div>
        <div class="md-form-group">
          <div class="md-label-static">

            <label class="col-sm-2  md-control-label" for="form-control-21"><b>Director:</b> {{selectedColegio.director}}</label>
            <div class="col-sm-10">
              <input id="form-control-21" class="form-control" type="text" [(ngModel)]="colegio.director" readonly>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-8 col-md-offset-2">
    <div class="media">
      <div class="media-heading">
        <h4 class="card-title">Insignia del Establecimiento</h4>
      </div>
      <div class="media-body media-middle">
        <div class="row">
          <div class="col-md-4" *ngIf="colegio.img">
            <div class="media-left">
              <img class="img-responsive" [src]="colegio.img" alt="Red dot" />
            </div>
          </div>
          <div class="col-md-8">
            <div class="demo-md-form-wrapper" *ngIf="selectedColegio">
              <div class="form form-horizontal">
                <div class="form-group">
                  <label class="file-upload-btn btn btn-primary" for="form-control-22"><span class="m-a-sm">Subir Insignia</span>
                    <input class="file-upload-input" id="form-control-22" type="file" (change)="imgUpload($event)" accept=".png,.gif,.jpg">
                  </label>
                  <button class="btn btn-danger" [disabled]="!colegio.img" (click)="colegio.img=null"><span class="icon icon-trash"></span></button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<div class="row">
  <div class="col-md-8 col-md-offset-2">
    <div class="form form-horizontal">
      <div class="demo-md-form-wrapper">
        <div class="md-form-group">
          <div class="col-sm-4">
            <button class="btn btn-default btn-block" (click)="goBack()">Volver</button>
          </div>
          <div class="col-sm-8">
            <button class="btn btn-primary btn-block" (click)="saveColegio()" [disabled]="!(selectedColegio)">Guardar</button>

            <modal [animation]="true" #modal>
              <modal-header [show-close]="true">
                <h4 class="modal-title">Colegio editado con éxito.</h4>
              </modal-header>
              <modal-body>
                Presione Ok para continuar.
              </modal-body>
              <modal-footer>
                <button type="button" class="btn btn-primary" (click)="modalClose()">Ok</button>
              </modal-footer>
            </modal>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<modal [animation]="true" [backdrop]="'static'" [keyboard]="false" (onClose)="warningModalClose()" #warning>
  <modal-header [show-close]="false">
    <h4 class="modal-title"><span class="icon text-warning icon-warning"></span> Ventana muy pequeña.</h4>
  </modal-header>
  <modal-body class="modal-content">
    <p class="card-text">Necesita una ventana más grande para editar el colegio. Intente abriendo aplicación en el navegador de un computador de escritorio o laptop.</p>
  </modal-body>
  <modal-footer>
    <button type="button" class="btn btn-default" (click)="goBack()">Volver</button>
  </modal-footer>
</modal>

